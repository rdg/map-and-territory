flowchart TD
    Start[User opens application] --> NewProject[Create new campaign project]
    
    %% Project setup
    NewProject --> ProjectStructure[Set up project hierarchy]
    ProjectStructure --> CreateMaps[Create multiple maps]
    
    %% Professional layout optimization
    CreateMaps --> OptimizeLayout[User optimizes layout for task]
    OptimizeLayout -->|Focused editing| CollapsePanels[Collapse panels for max canvas]
    OptimizeLayout -->|Layer management| ShowScene[Keep scene panel open]
    OptimizeLayout -->|Property editing| ShowProps[Keep property panel open]
    
    %% Multi-document workflow
    ShowScene --> NavigateMaps[Switch between maps via tabs]
    NavigateMaps --> MapSpecific[Each map has own layers and settings]
    
    %% Iterative editing cycle
    MapSpecific --> SelectElements[Select map elements]
    SelectElements --> EditProperties[Modify in property panel]
    EditProperties --> ApplyChanges[Changes reflected in canvas]
    ApplyChanges --> PreviewResult[Review visual changes]
    
    %% Efficient shortcuts
    PreviewResult -->|Satisfied| NextElement[Continue to next element]
    PreviewResult -->|Need adjustment| EditProperties
    PreviewResult -->|Switch context| KeyboardShortcuts[Use Ctrl+1/2 for panels]
    
    NextElement --> SelectElements
    KeyboardShortcuts --> OptimizeLayout
    
    %% Power user features
    SelectElements -->|Bulk operations| MultiSelect[Select multiple elements]
    MultiSelect --> BulkEdit[Apply changes to all selected]
    BulkEdit --> TimeEfficient[Save time on repetitive tasks]
    
    %% Export and finalization
    TimeEfficient --> ReadyExport[Maps ready for use]
    NextElement --> ReadyExport
    ApplyChanges --> ReadyExport
    
    ReadyExport --> ExportOptions[Choose export format]
    ExportOptions -->|Single map| ExportOne[Export current map]
    ExportOptions -->|Full campaign| ExportAll[Export campaign pack]
    
    %% Professional output
    ExportOne --> HighQuality[Professional quality output]
    ExportAll --> CampaignPack[Complete campaign materials]
    
    HighQuality --> PublishReady[Ready for publication or play]
    CampaignPack --> PublishReady
    
    %% Iteration and refinement
    PublishReady -->|Need changes| NavigateMaps
    PublishReady -->|New maps needed| CreateMaps
    
    %% Link to prototype states and user context
    CollapsePanels -.-> MaxCanvasState["both-collapsed.html"]
    ShowScene -.-> SceneOpenState["index.html with scene focus"]
    NavigateMaps -.-> MultiDocState["multi-tab.html"]
    SelectElements -.-> ContextStates["context-terrain.html, context-text.html"]
    
    %% User persona alignment
    OptimizeLayout -.-> GameMaster["Game Master - Efficient worldbuilding"]
    ExportAll -.-> ContentCreator["Content Creator - Professional output"]
    PreviewResult -.-> Player["Player - Visual quality matters"]
    
    %% Styling
    classDef prototypeLink fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,stroke-dasharray: 5 5
    classDef personaLink fill:#fff3e0,stroke:#f57c00,stroke-width:2px,stroke-dasharray: 3 3
    classDef efficiency fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef professional fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    
    class MaxCanvasState,SceneOpenState,MultiDocState,ContextStates prototypeLink
    class GameMaster,ContentCreator,Player personaLink
    class KeyboardShortcuts,MultiSelect,TimeEfficient efficiency
    class HighQuality,CampaignPack,PublishReady professional