flowchart TD
    Start[User opens map editor] --> FullLayout{Full layout active}
    
    %% Panel Management Flows
    FullLayout -->|Click scene collapse| SceneCollapse[Scene panel collapses]
    FullLayout -->|Click property collapse| PropCollapse[Property panel collapses]
    FullLayout -->|Ctrl+1| SceneToggle[Toggle scene panel]
    FullLayout -->|Ctrl+2| PropToggle[Toggle property panel]
    
    SceneCollapse --> ExpandedCanvas[More canvas space available]
    PropCollapse --> ExpandedCanvas
    
    SceneCollapse -->|Click expand icon| RestoreScene[Scene panel expands]
    PropCollapse -->|Click expand icon| RestoreProp[Property panel expands]
    
    %% Maximum canvas mode
    SceneCollapse -->|Also collapse property| MaxCanvas[Maximum canvas mode]
    PropCollapse -->|Also collapse scene| MaxCanvas
    MaxCanvas -->|Quick tools visible| QuickActions[Access essential functions]
    
    %% Keyboard shortcuts
    SceneToggle --> FullLayout
    PropToggle --> FullLayout
    
    %% Return paths
    RestoreScene --> FullLayout
    RestoreProp --> FullLayout
    MaxCanvas -->|Ctrl+1 or Ctrl+2| FullLayout
    
    %% Link to prototype states
    FullLayout -.-> IndexState["index.html"]
    SceneCollapse -.-> SceneState["scene-collapsed.html"]
    PropCollapse -.-> PropState["property-collapsed.html"]
    MaxCanvas -.-> BothState["both-collapsed.html"]
    
    %% Styling
    classDef prototypeLink fill:#e1f5fe,stroke:#0277bd,stroke-width:2px,stroke-dasharray: 5 5
    class IndexState,SceneState,PropState,BothState prototypeLink