flowchart TD
    Start[User opens Map&Territory] --> CheckProject{Existing project?}
    
    CheckProject -->|Yes| LoadProject[Load existing project]
    CheckProject -->|No| NewProject[Create new project]
    
    LoadProject --> OrientWorkspace[Orient to workspace layout]
    NewProject --> OrientWorkspace
    
    OrientWorkspace --> EvaluateLayout{Layout needs adjustment?}
    
    EvaluateLayout -->|Need scene view| ExpandScene[Click scene toggle F1]
    EvaluateLayout -->|Need properties| ExpandProperties[Click properties toggle F2]
    EvaluateLayout -->|Layout OK| SelectTool[Select creative tool]
    
    ExpandScene --> SelectTool
    ExpandProperties --> SelectTool
    
    SelectTool --> ToolChoice{Which creative action?}
    
    ToolChoice -->|Select objects| UseSelectTool[Select tool - click objects]
    ToolChoice -->|Paint hexes| UsePaintTool[Hex paint tool - brush hexes]
    ToolChoice -->|Draw lines| UseDrawTool[Draw tool - create paths]
    ToolChoice -->|Remove elements| UseEraseTool[Erase tool - remove content]
    
    UseSelectTool --> AdjustProperties[Modify properties in right panel]
    UsePaintTool --> CheckResult[Evaluate painting result]
    UseDrawTool --> CheckResult
    UseEraseTool --> CheckResult
    
    AdjustProperties --> CheckResult
    
    CheckResult --> Satisfied{Happy with changes?}
    
    Satisfied -->|No| ToolChoice
    Satisfied -->|Yes| ContinueWork{More work needed?}
    
    ContinueWork -->|Yes| EvaluateLayout
    ContinueWork -->|No| ReviewMap[Collapse panels for full view]
    
    ReviewMap --> FinalCheck{Map ready?}
    
    FinalCheck -->|Needs changes| EvaluateLayout
    FinalCheck -->|Complete| Save[Save project]
    
    Save --> Export{Export needed?}
    Export -->|Yes| ExportMap[Export to PNG/SVG]
    Export -->|No| Complete[Session complete]
    
    ExportMap --> Complete
    
    style Start fill:#e1f5fe
    style Complete fill:#e8f5e8
    style ToolChoice fill:#fff3e0
    style EvaluateLayout fill:#f3e5f5
    style SelectTool fill:#fff8e1